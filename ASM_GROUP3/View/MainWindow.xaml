<Window x:Class="ASM_GROUP3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:ASM_GROUP3.ViewModel"
        Title="Quản lý Hải sản" Height="600" Width="900">

    <DockPanel Margin="10">
        <!-- Top Panel -->
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="0,0,0,10">
            <TextBox Width="200" Margin="0,0,10,0" 
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" />
            <ComboBox Width="150" Margin="0,0,10,0"
                      ItemsSource="{Binding Categories}"
                      SelectedItem="{Binding SelectedCategory}" />
            <Button Content="Tìm" Command="{Binding SearchCommand}" Width="60" Margin="0,0,10,0"/>
            <Button Content="Thêm mới" Command="{Binding AddCommand}" Width="80"/>
            <Button Content="Cập nhật" Command="{Binding UpdateCommand}" Width="80"/>
            <Button Content="Xóa" Command="{Binding DeleteCommand}" Width="80" Margin="10,0,0,0"/>
        </StackPanel>

        <!-- DataGrid -->
        <DataGrid ItemsSource="{Binding Seafoods}"
                  SelectedItem="{Binding SelectedSeafood}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Tên" Binding="{Binding Name}" Width="*" />

                <!-- Dropdown chỉnh loại -->
                <DataGridTemplateColumn Header="Loại" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Category}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding DataContext.Categories, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                      SelectedItem="{Binding Category, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="Đơn vị" Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Unit}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{x:Static vm:UnitOptions.All}"
          Text="{Binding Unit, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
          IsEditable="True"
          IsTextSearchEnabled="True" />

                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>


                <!-- Số lượng (decimal) -->
                <DataGridTextColumn Header="Số lượng"
                                    Binding="{Binding Quantity, StringFormat=N2, UpdateSourceTrigger=PropertyChanged}"
                                    Width="80" />

                <!-- Giá nhập (decimal) -->
                <DataGridTextColumn Header="Giá nhập"
                                    Binding="{Binding UnitPrice, StringFormat=N2, UpdateSourceTrigger=PropertyChanged}"
                                    Width="100" />

                <!-- Ngày nhập -->
                <DataGridTextColumn Header="Ngày nhập"
                                    Binding="{Binding ImportDate, StringFormat=dd/MM/yyyy}"
                                    Width="120" />

                <!-- Còn hàng -->
                <DataGridCheckBoxColumn Header="Còn hàng"
                                         Binding="{Binding IsAvailable}"
                                         Width="80" />
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>
